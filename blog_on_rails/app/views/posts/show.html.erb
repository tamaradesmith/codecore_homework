
<article>
    <div class="card">
        <div>
            <h2> <%= @post.title %> </h2>
            <p><%= @post.body %> </p>
        </div>
        <div>

            <%= link_to "Edit", edit_post_path(@post) %>
            <%= link_to "Delete", post_path(@post), method: :delete, data: {confirm: "Delete post"} %>
        </div>
    </div>

    <div>
        <%= form_with(model: [@post, @comment], local:true) do |f| %>
            <% if @comment.errors.any?  %>
                <ul>
                    <% @comment.errors.full.messages.each do |msg|  %>
                        <li><%= msg %></li>
                    <% end  %>
                </ul>
            <% end %>
            <%= f.text_area :body, cols: 50, rows: 2, placeholder: "Enter comment here" %>
            <%= f.submit "Submit Comment" %>
        <% end %>
    </div>
    <div class="card">
        <% @post.comments.each do |comment| %>
        <%= comment.body %>
        <%=  time_ago_in_words(comment.created_at) %>
            <%= link_to "Delete comment", post_comment_path(@post, comment), method: :delete, data: {confirm: "Are you sure?"} %>
        <% end %>

    </div>
</article>